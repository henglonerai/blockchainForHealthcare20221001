{"version":3,"sources":["add.component.ts"],"names":["core_1","require","PatientAddComponent","ps","this","model","patID","fName","lName","Doj","emailID","phone","city","state","speciality","imageHash","imageCompressedUrl","show","msg_text","warn","success","IPFShash","ipfs","prototype","ngOnInit","onAddPatientSubmit","_this","image_url","data","addPatient","then","r","console","log","er","PreviewImage","event","target","files","reader","FileReader","onload","result","readAsDataURL","onClose","__decorate","Component","selector","templateUrl","styleUrls","exports"],"mappings":"6YAAA,IAAAA,OAAAC,QAAA,iBAUAC,oBAAA,WA0BE,SAAAA,EACUC,GAAAC,KAAAD,GAAAA,EA1BVC,KAAAC,MAAa,CACXC,MAAO,GACPC,MAAO,aACPC,MAAO,YACPC,IAAK,GACLC,QAAS,sBACTC,MAAO,aACPC,KAAM,kBACNC,MAAO,aACPC,WAAY,mBACZC,UAAW,IAIbX,KAAAY,mBAA6B,GAE7BZ,KAAAa,MAAgB,EAChBb,KAAAc,SAAmB,GACnBd,KAAAe,MAAgB,EAChBf,KAAAgB,SAAmB,EAInBhB,KAAAiB,SAAmB,GAKjBjB,KAAKkB,KAAOnB,EAAGmB,KAoDnB,OAjDEpB,EAAAqB,UAAAC,SAAA,WACEpB,KAAKkB,KAAOlB,KAAKD,GAAGmB,MAGtBpB,EAAAqB,UAAAE,mBAAA,WAAA,IAAAC,EAAAtB,KACEA,KAAKa,MAAO,EACZb,KAAKc,SAAW,oCAChBd,KAAKe,MAAO,EAEZf,KAAKC,MAAMU,UAAYX,KAAKuB,UAE5B,IAAIC,EAAOxB,KAAKC,MAEhBD,KAAKD,GAAG0B,WAAWzB,KAAKC,MAAMC,MAAOsB,GAAME,KAAK,SAACC,GAC/CL,EAAKN,SAAU,EACfM,EAAKR,SAAW,wBAChBQ,EAAKR,UAAY,mCACjBc,QAAQC,IAAI,2BAEZP,EAAKrB,MAAQ,KAEP,MAAC,SAAC6B,GACRR,EAAKP,MAAO,EACZO,EAAKR,SACH,yEACAQ,EAAKrB,MAAMC,MACX,yEACF0B,QAAQC,IAAIC,MAKhBhC,EAAAqB,UAAAY,aAAA,SAAaC,GAAb,IAAAV,EAAAtB,KACE,GAAIgC,EAAMC,OAAOC,OAASF,EAAMC,OAAOC,MAAM,GAAI,CAC/C,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAACL,GACfV,EAAKC,UAAYS,EAAMC,OAAOK,OAE9BV,QAAQC,IAAIP,EAAKC,YAGnBY,EAAOI,cAAcP,EAAMC,OAAOC,MAAM,MAI5CpC,EAAAqB,UAAAqB,QAAA,WACExC,KAAKa,MAAO,EACZb,KAAKe,MAAO,GA/EHjB,EAAmB2C,WAAA,CAL/B7C,OAAA8C,UAAU,CACTC,SAAU,cACVC,YAAa,uBACbC,UAAW,CAAC,2BAED/C,GAAb,GAAagD,QAAAhD,oBAAAA","file":"add.component.min.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { IPFSHTTPClient } from 'ipfs-http-client/dist/src/types';\nimport { PatientService } from 'src/admin/services/patient.service';\n\n\n@Component({\n  selector: 'patient-add',\n  templateUrl: './add.component.html',\n  styleUrls: ['./add.component.sass'],\n})\nexport class PatientAddComponent implements OnInit {\n  model: any = {\n    patID: '',\n    fName: 'first_name',\n    lName: 'last_name',\n    Doj: '',\n    emailID: 'test_name@gmail.com',\n    phone: '0107674088',\n    city: 'Eg: Butterworth',\n    state: 'Eg: Penang',\n    speciality: 'Eg: Cardiologist',\n    imageHash: '',\n  };\n\n  image_url: any;\n  imageCompressedUrl: string = '';\n\n  show: boolean = false;\n  msg_text: string = '';\n  warn: boolean = false;\n  success: boolean = false\n\n  ipfs: IPFSHTTPClient;\n\n  IPFShash: string = ''\n\n  constructor(\n    private ps: PatientService\n  ) {\n    this.ipfs = ps.ipfs\n  }\n\n  ngOnInit(): void {\n    this.ipfs = this.ps.ipfs\n  }\n\n  onAddPatientSubmit() {\n    this.show = true;\n    this.msg_text = 'Adding Patient to the Network....';\n    this.warn = false;\n\n    this.model.imageHash = this.image_url;\n\n    let data = this.model;\n\n    this.ps.addPatient(this.model.patID, data).then((r: any) => {\n      this.success = true\n      this.msg_text = 'Data added to IPFS...';\n      this.msg_text += '<br>User Added to the Blockchain';\n      console.log('User added Successfully');\n\n      this.model = {}\n\n    }).catch((er: any) => {\n      this.warn = true\n      this.msg_text =\n        'Adding Patient Failed<br> <small class=\"fw-light text-danger\"><b>\"</b>' +\n        this.model.patID +\n        '<b>\"</b></small><br>1.not a valid address or <br>2.Already have a role';\n      console.log(er);\n    })\n  }\n\n\n  PreviewImage(event: any) {\n    if (event.target.files && event.target.files[0]) {\n      var reader = new FileReader();\n      reader.onload = (event: any) => {\n        this.image_url = event.target.result;\n        // this.compressImage();\n        console.log(this.image_url);\n\n      };\n      reader.readAsDataURL(event.target.files[0]);\n    }\n  }\n\n  onClose() {\n    this.show = false;\n    this.warn = false;\n  }\n}\n"]}